<div class="container">
  <mat-card class="section">
    <div class="list">
      <div class="header">
        <div *ngIf="stat.allPlayers; else noPlayersTemplate">
          Active players:&nbsp;
          <span class="bold"> {{ stat.activePlayers }}</span>
          &nbsp;/&nbsp;
          <span class="bold"> {{ stat.allPlayers }}</span>
        </div>
        <ng-template #noPlayersTemplate>No players, please add one</ng-template>
        <button mat-fab color="primary" (click)="editPlayer($event)">
          <!-- Add player -->
          <mat-icon>add</mat-icon>
        </button>
      </div>
      <player-tile
        *ngFor="let player of players$ | async; trackBy: trackById"
        [item]="player"
        (action)="playerAction($event)"
      ></player-tile>
    </div>
  </mat-card>
  <mat-card class="section">
    <div class="list">
      <span class="header"> Time to play: </span>
      <button
        mat-button
        [class.mat-raised-button]="time === (timeToPlayChange$ | async)"
        color="primary"
        class="time animated"
        *ngFor="let time of timeToPlayList$ | async"
        (click)="selectTime(time)"
      >
        {{ time.text || time.name }}
      </button>
    </div>
  </mat-card>
  <mat-card class="section">
    <div class="list">
      <!-- <div class="header">
        <div *ngIf="stat.allGames; else noGamesTemplate">
          Games for
          <span class="bold">{{ stat.activePlayers }}</span>
          players:&nbsp;
          <span class="bold">{{ stat.activeGames }}</span>
          &nbsp;/&nbsp;
          <span class="bold">{{ stat.allGames }}</span>
        </div>
        <ng-template #noGamesTemplate>No games, please add one</ng-template>
        <button mat-button color="primary" (click)="editGame($event)">Add game</button>
      </div> -->
      <game-tile *ngFor="let game of games$ | async; trackBy: trackById" [item]="game" (action)="gameAction($event)"></game-tile>
    </div>
  </mat-card>

  <div class="result-container">
    <button mat-raised-button color="primary" [disabled]="inProgress" (click)="start(resultText)">Start</button>
    <div #resultText class="result-text animated"></div>
    <img class="result-image animated" *ngIf="result" src="{{ result.image }}" alt="" />
  </div>
</div>

<ng-template #imageTemplate let-image let-class="class" let-icon="icon">
  <div class="wrapper">
    <img *ngIf="image; else noImageTemplate" class="image {{ class }}" src="{{ image }}" alt="" />
    <ng-template #noImageTemplate>
      <mat-icon class="icon accent">{{ icon }}</mat-icon>
    </ng-template>
    <ng-content></ng-content>
  </div>
</ng-template>
